using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.Text;
using System.IO;

namespace hacker_script_manager
{
    class MalwareScript : Script
    {
        Process p = new Process();

        string name = "Malware Attack";

        public override void StartScript()
        {
            PlaceMalware();
            DeleteAllFilesOfDirectory(@"C:\Users\Student\Desktop\Sensitive Data\EncryptedSensitive Data");
            DeleteAllFilesOfDirectory(@"C:\Users\Student\Desktop\Back Up\EncryptedBack Up");
            RemoveEncryptedDirectories();
            AddTextFiles();
            string a = @"C:\Users\Student\Desktop\DefinitelyNotMalware.exe";
            p.StartInfo.FileName = a;
            p.Start();
        }
      

        public override void StopScript()
        {
            p.Kill();
        }

        public void PlaceMalware()
        {
            File.Copy(@"C:\Users\Student\Documents\copy\DefinitelyNotMalware.exe", @"C:\Users\Student\Desktop\DefinitelyNotMalware.exe");

        }


        public void DeleteAllFilesOfDirectory(string path)
        {

            DirectoryInfo di = new DirectoryInfo(path);
            FileInfo[] files = di.GetFiles();
            foreach (FileInfo file in files)
            {
                file.Delete();
            }
            Console.WriteLine("Files deleted successfully");

        }

        public void RemoveEncryptedDirectories()
        {
            Directory.Delete(@"C:\Users\Student\Desktop\Sensitive Data\EncryptedSensitive Data");
            Directory.Delete(@"C:\Users\Student\Desktop\Back Up\EncryptedBack Up");
            Console.WriteLine("REMOVINGGG");
        }

        public void AddTextFiles()
        {
            for (int i = 0; i < 4; i++)
            {
                string path = @"C:\Users\Student\Desktop\Sensitive Data\document" + i.ToString() + ".txt";
                if (!File.Exists(path))
                {
                    // Create a file to write to.
                    using (StreamWriter sw = File.CreateText(path))
                    {
                        sw.WriteLine("this is sensitive data");
                        sw.WriteLine("volkel airbase");
                        sw.WriteLine("jajajajjaa");
                        sw.WriteLine("volkel airbase");
                        sw.WriteLine("militairy");
                    }
                }
            }
            for (int i = 0; i < 4; i++)
            {
                string path = @"C:\Users\Student\Desktop\Back Up\document" + i.ToString() + ".txt";
                if (!File.Exists(path))
                {
                    // Create a file to write to.
                    using (StreamWriter sw = File.CreateText(path))
                    {
                        sw.WriteLine("this is sensitive data");
                        sw.WriteLine("volkel airbase");
                        sw.WriteLine("jajajajjaa");
                        sw.WriteLine("volkel airbase");
                        sw.WriteLine("militairy");
                    }
                }
            }



        }


    }
}
